{"version":3,"file":"js/634.0f7da974.js","mappings":"gMACOA,MAAM,Y,GAKJA,MAAM,c,GACXC,EAAAA,EAAAA,IAQQ,eAPNA,EAAAA,EAAAA,IAMK,YALHA,EAAAA,EAAAA,IAAW,UAAP,OACJA,EAAAA,EAAAA,IAAc,UAAV,UACJA,EAAAA,EAAAA,IAAY,UAAR,QACJA,EAAAA,EAAAA,IAAa,UAAT,SACJA,EAAAA,EAAAA,IAAW,UAAP,UAAE,G,GAbdC,IAAA,EAsB6CF,MAAM,gB,GAtBnDE,IAAA,EAuBuBF,MAAM,2B,GAGdA,MAAM,a,EA1BrB,Y,EAAA,Y,iGAAAG,EAAAA,EAAAA,IAAAC,EAAAA,GAAA,OACEH,EAAAA,EAAAA,IAIM,MAJNI,EAIM,EAHJJ,EAAAA,EAAAA,IAES,UAFDD,MAAM,kBAAkBM,KAAK,SAAUC,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAC,iBAAgB,KAAO,cAI/EV,EAAAA,EAAAA,IA4BQ,QA5BRW,EA4BQ,CA3BNC,GASAZ,EAAAA,EAAAA,IAiBQ,6BAhBNE,EAAAA,EAAAA,IAeKC,EAAAA,GAAA,MAhCXU,EAAAA,EAAAA,IAiBgCC,EAAAC,SAjBhC,CAiBkBC,EAAMf,M,WAAlBC,EAAAA,EAAAA,IAeK,MAf+BD,IAAKA,GAAG,EAC1CD,EAAAA,EAAAA,IAAyB,WAAAiB,EAAAA,EAAAA,IAAlBD,EAAKE,OAAK,IACjBlB,EAAAA,EAAAA,IAA4B,WAAAiB,EAAAA,EAAAA,IAArBD,EAAKG,SAAU,IAAC,IACvBnB,EAAAA,EAAAA,IAA2C,WAAAiB,EAAAA,EAAAA,IAApCG,EAAAC,SAASC,KAAKN,EAAKO,WAAQ,IAClCvB,EAAAA,EAAAA,IAGK,WAF6B,IAApBgB,EAAKQ,aAAU,WAA3BtB,EAAAA,EAAAA,IAAiE,OAAjEuB,EAAwD,SAAE,WAC1DvB,EAAAA,EAAAA,IAAuD,OAAvDwB,EAA6C,WAE/C1B,EAAAA,EAAAA,IAMK,YALHA,EAAAA,EAAAA,IAIM,MAJN2B,EAIM,EAHJ3B,EAAAA,EAAAA,IACiD,UADzCD,MAAM,iCACbO,QAAKE,GAAEC,EAAAC,iBAAgB,EAAOM,IAAO,KAAE,EA5BpDY,IA6BY5B,EAAAA,EAAAA,IAAqF,UAA7ED,MAAM,gCAAiCO,QAAKE,GAAEC,EAAAoB,aAAab,IAAO,KAAE,EA7BxFc,Y,WAmCEC,EAAAA,EAAAA,IAAoFC,EAAA,CAAtEC,OAAQnB,EAAAoB,WAAYC,IAAI,cAAeC,eAAe3B,EAAA4B,c,qCACpEN,EAAAA,EAAAA,IAA6EO,EAAA,CAAlEtB,KAAMF,EAAAoB,WAAaK,UAAU9B,EAAA+B,UAAWL,IAAI,Y,yDCnClDpC,MAAM,aAAa0C,GAAG,cAAcC,SAAS,KAAKC,KAAK,SACvD,kBAAgB,oBAAoB,cAAY,OAAOR,IAAI,S,GACzDpC,MAAM,eAAe4C,KAAK,Y,GACxB5C,MAAM,iB,GACTC,EAAAA,EAAAA,IAIM,OAJDD,MAAM,gBAAc,EACvBC,EAAAA,EAAAA,IAA+D,MAA3DD,MAAM,cAAc0C,GAAG,qBAAoB,gBAC/CzC,EAAAA,EAAAA,IAC4D,UADpDK,KAAK,SAASN,MAAM,YACpB,kBAAgB,QAAQ,aAAW,Y,MAExCA,MAAM,c,GACJA,MAAM,Q,GACF6C,IAAI,S,GAKR7C,MAAM,Q,GACF6C,IAAI,e,GAKR7C,MAAM,Q,GACF6C,IAAI,Y,GAKR7C,MAAM,Q,GACF6C,IAAI,S,GAKR7C,MAAM,Q,GACJA,MAAM,c,GACFA,MAAM,mBAAmB6C,IAAI,c,GAUrC7C,MAAM,gB,GACTC,EAAAA,EAAAA,IAAsF,UAA9EK,KAAK,SAASN,MAAM,oBAAoB,kBAAgB,SAAQ,SAAK,G,0CA/CrFG,EAAAA,EAAAA,IAsDM,MAtDNE,EAsDM,EApDJJ,EAAAA,EAAAA,IAmDM,MAnDNW,EAmDM,EAlDJX,EAAAA,EAAAA,IAiDM,MAjDNY,EAiDM,CAhDJa,GAKAzB,EAAAA,EAAAA,IAoCM,MApCN0B,EAoCM,EAnCJ1B,EAAAA,EAAAA,IAKM,MALN2B,EAKM,EAJJ3B,EAAAA,EAAAA,IAGQ,QAHR4B,EAGQ,EAfpBiB,EAAAA,EAAAA,IAY+B,QACjB,SAAA7C,EAAAA,EAAAA,IACyB,SADlBK,KAAK,OAAON,MAAM,eAAe0C,GAAG,QAbzD,sBAAAlC,EAAA,KAAAA,EAAA,GAAAC,GAa0EM,EAAAoB,WAAWhB,MAAKV,GACvEsC,YAAY,S,iBAD2ChC,EAAAoB,WAAWhB,cAI3ElB,EAAAA,EAAAA,IAKM,MALN8B,EAKM,EAJJ9B,EAAAA,EAAAA,IAGQ,QAHR+C,EAGQ,EArBpBF,EAAAA,EAAAA,IAkBqC,SACvB,SAAA7C,EAAAA,EAAAA,IAC0B,SADnBK,KAAK,OAAON,MAAM,eAAe0C,GAAG,cAnBzD,sBAAAlC,EAAA,KAAAA,EAAA,GAAAC,GAmBgFM,EAAAoB,WAAWc,KAAIxC,GAC5EsC,YAAY,U,iBADiDhC,EAAAoB,WAAWc,aAIjFhD,EAAAA,EAAAA,IAKM,MALNiD,EAKM,EAJJjD,EAAAA,EAAAA,IAGQ,QAHRkD,EAGQ,EA3BpBL,EAAAA,EAAAA,IAwBkC,SACpB,SAAA7C,EAAAA,EAAAA,IACwB,SADjBK,KAAK,OAAON,MAAM,eAAe0C,GAAG,WAzBzD,sBAAAlC,EAAA,KAAAA,EAAA,GAAAC,GA0B4BM,EAAAS,SAAQf,I,iBAARM,EAAAS,iBAGlBvB,EAAAA,EAAAA,IAKM,MALNmD,EAKM,EAJJnD,EAAAA,EAAAA,IAGQ,QAHRoD,EAGQ,EAjCpBP,EAAAA,EAAAA,IA8B+B,WACjB,SAAA7C,EAAAA,EAAAA,IACgE,SADzDK,KAAK,SAASN,MAAM,eAAe0C,GAAG,QA/B3D,sBAAAlC,EAAA,KAAAA,EAAA,GAAAC,GAgCmCM,EAAAoB,WAAWf,QAAOX,GAAEsC,YAAY,Y,iBAAhChC,EAAAoB,WAAWf,aAAO,GAhCrDkC,QAgCmB,WAGTrD,EAAAA,EAAAA,IAUM,MAVNsD,EAUM,EATJtD,EAAAA,EAAAA,IAQM,MARNuD,EAQM,EAPJvD,EAAAA,EAAAA,IAMQ,QANRwD,EAMQ,EA3CtBX,EAAAA,EAAAA,IAqC+D,WAE/C,SAAA7C,EAAAA,EAAAA,IAGqD,SAH9CD,MAAM,mBAAmBM,KAAK,WAC/B,aAAY,EACZ,cAAa,EAzCnC,sBAAAE,EAAA,KAAAA,EAAA,GAAAC,GA0C8BM,EAAAoB,WAAWV,WAAUhB,GAAEiC,GAAG,c,iBAA1B3B,EAAAoB,WAAWV,uBAKjCxB,EAAAA,EAAAA,IAKM,MALNyD,EAKM,CAJJC,GACA1D,EAAAA,EAAAA,IAES,UAFDK,KAAK,SAASN,MAAM,kBACnBO,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEY,EAAAuC,MAAM,gBAAiB7C,EAAAoB,cAAa,iBACpD,I,eAUV,GACE0B,KAAM,cACNC,MAAO,CACL5B,OAAQ,CAAC,GAEX6B,IAAAA,GACE,MAAO,CACL5B,WAAY,CAAC,EACbX,SAAU,GAEd,EACAwC,MAAO,CAAC,iBACRC,MAAO,CACL/B,MAAAA,GACEgC,KAAK/B,WAAa+B,KAAKhC,OAEvBiC,QAAQC,IAAIF,KAAK/B,WAAWX,UAC5B,MAAM6C,EAAc,IAAIC,KAAgC,IAA3BJ,KAAK/B,WAAWX,UAC1C+C,cAAcC,MAAM,MACtBN,KAAK1C,UAAY6C,CACpB,EACA7C,QAAAA,GACE0C,KAAK/B,WAAWX,SAAWiD,KAAKC,MAAM,IAAIJ,KAAKJ,KAAK1C,UAAY,IAClE,GAEFmD,OAAQ,CAACC,EAAAA,I,UCjFX,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,Q,UFoCA,GACEC,WAAY,CACVC,YAAW,EACXC,SAAQA,EAAAA,GAEVlB,MAAO,CACLmB,OAAQC,QAEVnB,IAAAA,GACE,MAAO,CACL/C,QAAS,CAAC,EACVmB,WAAY,CACVhB,MAAO,GACPM,WAAY,EACZL,QAAS,IACT6B,KAAM,IAERkC,WAAW,EACXC,OAAO,EAEX,EACAC,QAAS,CACPC,SAAAA,CAAUC,EAAO,GACf,MAAMC,EAAO,4EAAgFD,IAC7FrB,KAAKuB,MAAMC,IAAIF,EAAKtB,KAAKyB,aACtBC,MAAMC,IACDA,EAAI9B,KAAK+B,UACX5B,KAAKlD,QAAU6E,EAAI9B,KAAK/C,QACxBkD,KAAK6B,WAAaF,EAAI9B,KAAKgC,WAC7B,IAEDC,OAAOC,GAAQ9B,QAAQC,IAAI6B,IAChC,EACAtF,eAAAA,CAAgByE,EAAOnE,GACrBiD,KAAKkB,MAAQA,EACTlB,KAAKkB,MACPlB,KAAK/B,WAAa,CAChBX,UAAU,IAAI8C,MAAO4B,UAAY,KAGnChC,KAAK/B,WAAa,IAAKlB,GAEzBiD,KAAKiC,MAAMpB,YAAYqB,WACzB,EACA9D,YAAAA,CAAaH,GACX,GAAI+B,KAAKkB,MAAO,CACd,MAAMI,EAAO,oEACbtB,KAAKuB,MAAMY,KAAKb,EAAK,CAAEzB,KAAM5B,IAAcyD,MAAMC,IAC/C3B,KAAKoC,kBAAkBT,EAAK,SAC5B3B,KAAKoB,YACLpB,KAAKiC,MAAMpB,YAAYwB,WAAW,GAEtC,KAAO,CACL,MAAMf,EAAO,qEAAyEtB,KAAK/B,WAAWO,KACtGwB,KAAKuB,MAAMe,IAAIhB,EAAK,CAAEzB,KAAMG,KAAK/B,aAAcyD,MAAMC,IACnD3B,KAAKoC,kBAAkBT,EAAK,SAC5B3B,KAAKoB,YACLpB,KAAKiC,MAAMpB,YAAYwB,WAAW,GAEtC,CACF,EACAzE,YAAAA,CAAasD,EAAOnE,GAClBiD,KAAKyB,YAAc,IAAK1E,GACxB,MAAMwF,EAAevC,KAAKiC,MAAMO,SAChCD,EAAaL,WACf,EACA3D,SAAAA,GACE,MAAM+C,EAAO,qEAAyEtB,KAAK/B,WAAWO,KACtGwB,KAAKiB,WAAY,EACjBjB,KAAKuB,MAAMkB,OAAOnB,GAAKI,MAAMgB,IAC3B1C,KAAKoC,kBAAkBM,EAAU,SACjC,MAAMH,EAAevC,KAAKiC,MAAMO,SAChCD,EAAaF,YACbrC,KAAKoB,WAAW,GAEpB,GAEFuB,OAAAA,GACE3C,KAAKoB,WACP,GGrHF,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASwB,KAEpE,O","sources":["webpack://onlinestore/./src/views/Backend/CouponView.vue","webpack://onlinestore/./src/components/Backed/CouponModal.vue","webpack://onlinestore/./src/components/Backed/CouponModal.vue?84b4","webpack://onlinestore/./src/views/Backend/CouponView.vue?ff55"],"sourcesContent":["<template>\n  <div class=\"text-end\">\n    <button class=\"btn btn-primary\" type=\"button\" @click=\"openCouponModal(true)\">\n      新增優惠卷\n    </button>\n  </div>\n  <table class=\"table mt-4\">\n    <thead>\n      <tr>\n        <th>名稱</th>\n        <th>折扣百分比</th>\n        <th>到期日</th>\n        <th>是否啟用</th>\n        <th>編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"(item, key) in coupons\" :key=\"key\">\n        <td>{{ item.title }}</td>\n        <td>{{ item.percent }}%</td>\n        <td>{{ $filters.date(item.due_date) }}</td>\n        <td>\n          <span v-if=\"item.is_enabled === 1\" class=\"text-success\">啟用</span>\n          <span v-else class=\"text-success text-muted\">未啟用</span>\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button class=\"btn btn-outline-primary btn-sm\"\n            @click=\"openCouponModal(false, item)\">編輯</button>\n            <button class=\"btn btn-outline-danger btn-sm\" @click=\"openDelModal(item)\">刪除</button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <couponModal :coupon=\"tempCoupon\" ref=\"couponModal\" @update-coupon=\"updateCoupon\" />\n  <DelModal :item=\"tempCoupon\" @del-item=\"delCoupon\" ref=\"delModal\"></DelModal>\n</template>\n\n<script>\nimport couponModal from '@/components/Backed/CouponModal.vue';\nimport DelModal from '@/components/Backed/DelModal.vue';\n\nexport default {\n  components: {\n    couponModal,\n    DelModal,\n  },\n  props: {\n    config: Object,\n  },\n  data() {\n    return {\n      coupons: {},\n      tempCoupon: {\n        title: '',\n        is_enabled: 0,\n        percent: 100,\n        code: '',\n      },\n      isLoading: false,\n      isNew: false,\n    };\n  },\n  methods: {\n    getCoupon(page = 1) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupons/?page=${page}`;\n      this.$http.get(url, this.tempProduct)\n        .then((res) => {\n          if (res.data.success) {\n            this.coupons = res.data.coupons;\n            this.pagination = res.data.pagination;\n          }\n        })\n        .catch((err) => console.log(err));\n    },\n    openCouponModal(isNew, item) {\n      this.isNew = isNew;\n      if (this.isNew) {\n        this.tempCoupon = {\n          due_date: new Date().getTime() / 1000,\n        };\n      } else {\n        this.tempCoupon = { ...item };\n      }\n      this.$refs.couponModal.showModal();\n    },\n    updateCoupon(tempCoupon) {\n      if (this.isNew) {\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon`;\n        this.$http.post(url, { data: tempCoupon }).then((res) => {\n          this.$httpMessageState(res, '新增優惠券');\n          this.getCoupon();\n          this.$refs.couponModal.hideModal();\n        });\n      } else {\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\n        this.$http.put(url, { data: this.tempCoupon }).then((res) => {\n          this.$httpMessageState(res, '新增優惠券');\n          this.getCoupon();\n          this.$refs.couponModal.hideModal();\n        });\n      }\n    },\n    openDelModal(isNew, item) { // 開啟刪除視窗\n      this.tempProduct = { ...item };\n      const delComponent = this.$refs.delModal;\n      delComponent.showModal();\n    },\n    delCoupon() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\n      this.isLoading = true;\n      this.$http.delete(url).then((response) => {\n        this.$httpMessageState(response, '刪除優惠券');\n        const delComponent = this.$refs.delModal;\n        delComponent.hideModal();\n        this.getCoupon();\n      });\n    },\n  },\n  created() {\n    this.getCoupon();\n  },\n};\n</script>\n","<template>\n  <div class=\"modal fade\" id=\"couponModal\" tabindex=\"-1\" role=\"dialog\"\n       aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">Modal title</h5>\n          <button type=\"button\" class=\"btn-close\"\n                  data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"mb-3\">\n            <label for=\"title\">標題\n              <input type=\"text\" class=\"form-control\" id=\"title\" v-model=\"tempCoupon.title\"\n                   placeholder=\"請輸入標題\">\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"coupon_code\">優惠碼\n              <input type=\"text\" class=\"form-control\" id=\"coupon_code\" v-model=\"tempCoupon.code\"\n                   placeholder=\"請輸入優惠碼\">\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"due_date\">到期日\n              <input type=\"date\" class=\"form-control\" id=\"due_date\"\n                   v-model=\"due_date\">\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"price\">折扣百分比\n              <input type=\"number\" class=\"form-control\" id=\"price\"\n                   v-model.number=\"tempCoupon.percent\" placeholder=\"請輸入折扣百分比\">\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <div class=\"form-check\">\n              <label class=\"form-check-label\" for=\"is_enabled\">\n                是否啟用\n                <input class=\"form-check-input\" type=\"checkbox\"\n                     :true-value=\"1\"\n                     :false-value=\"0\"\n                     v-model=\"tempCoupon.is_enabled\" id=\"is_enabled\">\n              </label>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-primary\"\n                  @click=\"$emit('update-coupon', tempCoupon)\">更新優惠券\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  name: 'couponModal',\n  props: {\n    coupon: {},\n  },\n  data() {\n    return {\n      tempCoupon: {},\n      due_date: '',\n    };\n  },\n  emits: ['update-coupon'],\n  watch: {\n    coupon() {\n      this.tempCoupon = this.coupon;\n      // 將時間格式改為 YYYY-MM-DD\n      console.log(this.tempCoupon.due_date);\n      const dateAndTime = new Date(this.tempCoupon.due_date * 1000)\n        .toISOString().split('T');\n      [this.due_date] = dateAndTime;\n    },\n    due_date() {\n      this.tempCoupon.due_date = Math.floor(new Date(this.due_date) / 1000);\n    },\n  },\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./CouponModal.vue?vue&type=template&id=77ae0d78\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CouponView.vue?vue&type=template&id=3fc8cb03\"\nimport script from \"./CouponView.vue?vue&type=script&lang=js\"\nexport * from \"./CouponView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","key","_createElementBlock","_Fragment","_hoisted_1","type","onClick","_cache","$event","$options","openCouponModal","_hoisted_2","_hoisted_3","_renderList","$data","coupons","item","_toDisplayString","title","percent","_ctx","$filters","date","due_date","is_enabled","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","openDelModal","_hoisted_8","_createVNode","_component_couponModal","coupon","tempCoupon","ref","onUpdateCoupon","updateCoupon","_component_DelModal","onDelItem","delCoupon","id","tabindex","role","for","_createTextVNode","placeholder","_hoisted_9","code","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","number","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","$emit","name","props","data","emits","watch","this","console","log","dateAndTime","Date","toISOString","split","Math","floor","mixins","modalMixin","__exports__","components","couponModal","DelModal","config","Object","isLoading","isNew","methods","getCoupon","page","url","$http","get","tempProduct","then","res","success","pagination","catch","err","getTime","$refs","showModal","post","$httpMessageState","hideModal","put","delComponent","delModal","delete","response","created","render"],"sourceRoot":""}