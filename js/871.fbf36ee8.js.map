{"version":3,"file":"js/871.fbf36ee8.js","mappings":"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","sources":["webpack://onlinestore/./src/views/User/UserCartView.vue","webpack://onlinestore/./src/views/User/UserCartView.vue?87ca"],"sourcesContent":["<template>\n  <LoadingAnimation :active=\"isLoading\"></LoadingAnimation>\n  <div class=\"container\">\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">商品</th>\n          <th scope=\"col\">單價</th>\n          <th scope=\"col\">數量</th>\n          <th scope=\"col\">金額</th>\n          <th scope=\"col\">操作</th>\n        </tr>\n      </thead>\n      <tbody  v-for=\"item in carts.carts\" :key=\"item.id\">\n        <tr>\n          <td class=\"item_body\">\n            <img :src=\"item.product.imageUrl\" alt=\"\">\n            <div class=\"d-none d-lg-block d-xl-none\">{{ item.product.title }}</div>\n          </td>\n          <td><span>$</span>{{ item.product.price }}</td>\n          <td>\n            <div class=\"count d-flex\">\n              <button @click=\"updateCart(item, item.qty - 1)\"\n              type=\"button\" class=\"btn btn-outline-secondary\">-</button>\n              <input type=\"number\" class=\"form-control qty-input w-25\"\n              placeholder=\"請輸入數量\" aria-label=\"qty\" v-model=\"item.qty\"\n              @change.prevent=\"refreshCart(item, item.qty)\">\n              <button @click=\"updateCart(item, item.qty + 1)\"\n              type=\"button\" class=\"btn btn-outline-secondary\">+</button>\n          </div>\n          </td>\n          <td><span>$</span>{{ item.total }}</td>\n          <td>\n            <div class=\"operate\">\n              <button @click=\"DelCart(item.id)\" type=\"button\"\n              class=\"btn btn-outline-secondary\">刪除</button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <div class=\"d-flex flex-column\">\n        <div class=\"input-group mb-3 input-group-sm justify-content-end\">\n          <label for=\"coupon_code\">\n            <input id=\"coupon_code\" type=\"text\" class=\"form-control\"\n            v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\">\n          </label>\n          <div class=\"input-group-append \">\n            <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"addCouponCode\">\n              套用優惠碼\n            </button>\n          </div>\n        </div>\n        <div class=\"d-flex flex-column \">\n          <div class=\"d-flex justify-content-end\">\n          總金額:{{ carts.total }}\n          </div>\n          <div v-if=\"carts.final_total !== carts.total\" class=\"d-flex justify-content-end\">\n          折扣價:{{ carts.final_total }}\n          </div>\n        </div>\n      </div>\n  </div>\n  <div class=\"my-5 row justify-content-center\">\n    <V-Form class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"createOrder\">\n      <div class=\"mb-3\">\n        <label for=\"email\" class=\"form-label\">Email</label>\n        <V-Field id=\"email\" name=\"email\" type=\"email\"\n        class=\"form-control\" :class=\"{ 'is-invalid': errors['email'] }\"\n        placeholder=\"請輸入 Email\" rules=\"email|required\" v-model=\"form.user.email\"></V-Field>\n        <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"name\" class=\"form-label\">收件人姓名</label>\n        <V-Field id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\"\n        :class=\"{ 'is-invalid': errors['姓名'] }\"\n        placeholder=\"請輸入姓名\" rules=\"required\" v-model=\"form.user.name\"></V-Field>\n        <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"tel\" class=\"form-label\">收件人電話</label>\n        <V-Field id=\"tel\" name=\"電話\" type=\"tel\" class=\"form-control\"\n        :class=\"{ 'is-invalid': errors['電話'] }\"\n          placeholder=\"請輸入電話\" rules=\"required\" v-model=\"form.user.tel\"></V-Field>\n        <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"address\" class=\"form-label\">收件人地址</label>\n        <V-Field id=\"address\" name=\"地址\" type=\"text\"\n        class=\"form-control\" :class=\"{ 'is-invalid': errors['地址'] }\"\n          placeholder=\"請輸入地址\" rules=\"required\" v-model=\"form.user.address\"></V-Field>\n        <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"message\" class=\"form-label\">留言</label>\n        <textarea name=\"\" id=\"message\" class=\"form-control\"\n        cols=\"30\" rows=\"10\" v-model=\"form.message\"></textarea>\n      </div>\n      <div class=\"text-end\">\n        <button class=\"btn btn-danger\" @click=\"createOrder()\">送出訂單</button>\n      </div>\n    </V-Form>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  data() {\n    return {\n      carts: {},\n      coupon_code: '',\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      order: {},\n      isLoading: false,\n    };\n  },\n  methods: {\n    getCart() { // 取得購物車列表\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url)\n        .then((res) => {\n          this.isLoading = false;\n          this.carts = res.data.data;\n        });\n    },\n    updateCart(item, itemQty) { // 更新購物車\n      console.log(item.qty);\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      const cart = {\n        product_id: item.product_id,\n        qty: itemQty,\n      };\n      this.$http.put(url, { data: cart }).then(() => {\n        this.getCart();\n      });\n    },\n    DelCart(id) { // 刪除單筆選項\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.$http.delete(url)\n        .then((res) => {\n          this.$httpMessageState(res, '該商品已刪除');\n          this.getCart();\n        });\n    },\n    addCouponCode() { // 套用優惠卷\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.$http.post(url, { data: coupon })\n        .then((res) => {\n          this.$httpMessageState(res, '已套用優惠卷');\n          this.getCart();\n        });\n    },\n    createOrder() { // 結帳頁面\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      this.$http.post(url, { data: order })\n        .then((res) => {\n          if (res.data.orderId) {\n            this.$router.push(`/user/checkout/${res.data.orderId}`);\n          }\n        });\n    },\n  },\n  created() {\n    this.getCart();\n  },\n};\n</script>\n\n<style>\n.item_body img{\n  position: relative;\n  width: 80px;\n  height: 80px;\n  aspect-ratio: 1/1;\n  object-fit: cover;\n}\n</style>\n","import { render } from \"./UserCartView.vue?vue&type=template&id=58bbc01c\"\nimport script from \"./UserCartView.vue?vue&type=script&lang=js\"\nexport * from \"./UserCartView.vue?vue&type=script&lang=js\"\n\nimport \"./UserCartView.vue?vue&type=style&index=0&id=58bbc01c&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","scope","for","key","_createElementBlock","_Fragment","_createVNode","_component_LoadingAnimation","active","$data","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_renderList","carts","item","id","_hoisted_4","src","product","imageUrl","alt","_hoisted_5","_hoisted_6","_toDisplayString","title","_hoisted_7","_createTextVNode","price","_hoisted_8","onClick","$event","$options","updateCart","qty","type","_hoisted_9","placeholder","onChange","_withModifiers","_ctx","refreshCart","_hoisted_10","_hoisted_11","_hoisted_12","total","_hoisted_13","DelCart","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_cache","coupon_code","_hoisted_18","args","addCouponCode","_hoisted_19","_hoisted_20","final_total","_hoisted_21","_createCommentVNode","_hoisted_22","_component_V_Form","onSubmit","createOrder","default","_withCtx","errors","_hoisted_23","_hoisted_24","_component_V_Field","name","_normalizeClass","rules","modelValue","form","user","email","_component_ErrorMessage","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","tel","_hoisted_29","_hoisted_30","address","_hoisted_31","_hoisted_32","cols","rows","message","_hoisted_33","_","data","order","methods","getCart","url","this","$http","get","then","res","itemQty","console","log","cart","product_id","put","delete","$httpMessageState","coupon","code","post","orderId","$router","push","created","__exports__","render"],"sourceRoot":""}